<input hidden type="file" accept="image/*" #uploader (change)="uploadFile($event)" multiple
    enctype="multipart/form-data" />

<div
    class="sticky top-0 z-10 -mx-2 mb-2 flex items-center justify-between gap-2 border-b bg-background/80 px-2 py-2 backdrop-blur">
    <div class="flex items-center gap-2">
        <button [disabled]="page() === 0" hlmBtn variant="ghost" size="sm" class="gap-2" (click)="previous()">
            <ng-icon hlm size="base" name="lucideChevronLeftCircle" />
            Previous
        </button>

        <button hlmBtn variant="ghost" size="sm" class="gap-2" [disabled]="(page() + 1) * perPage() >= totalElements()"
            (click)="next()">
            <ng-icon hlm size="base" name="lucideChevronRightCircle" />
            Next
        </button>
    </div>

    <div class="flex items-center gap-2">
        <button hlmBtn variant="ghost" size="sm" class="gap-2">
            <ng-icon hlm size="base" name="lucideCamera" />

        </button>

        <button hlmBtn variant="ghost" size="sm" class="gap-2" (click)="uploader.click()">
            <ng-icon hlm size="base" name="lucideUpload" />
        </button>
    </div>

    <p class="text-sm text-muted-foreground">
        <span class="font-medium text-foreground">{{ totalElements() }}</span>
        medias
    </p>
</div>

<div class="grid grid-cols-3 gap-1 sm:grid-cols-4 md:grid-cols-5">
    @for (item of list(); track item.mediaId) {
    <button type="button"
        class="group relative aspect-square overflow-hidden rounded-md bg-neutral-100 ring-1 ring-border focus:outline-none focus-visible:ring-2 focus-visible:ring-ring"
        (click)="clickOnMedia(item)">
        <img class="h-full w-full object-cover transition-transform duration-200 group-hover:scale-[1.02]"
            [src]="getUrl(item.key)" alt="" loading="lazy" />

        @if (selectedMedias().includes(item.mediaId)) {
        <span
            class="absolute right-1 top-1 grid h-6 w-6 place-items-center rounded-full bg-blue-600 text-sm text-white shadow">
            âœ“
        </span>
        }
    </button>
    }
</div>